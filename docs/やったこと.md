## アプリ作成の手順

### 1. データベース準備
```sql
CREATE DATABASE konya_db DEFAULT CHARACTER SET utf8mb4;
CREATE USER 'java_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON konya_db.* TO 'java_user'@'localhost';
FLUSH PRIVILEGES;
```

### 2. プロジェクト作成
* Spring Initializr で **Spring Boot 3.5 / Gradle / Java 17** を選択  
* 依存関係: **Spring Web, Spring Data JPA, MySQL Driver, Lombok, DevTools**

### 3. `application.properties` 設定
```properties
spring.application.name=simple-spring-rest-api
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=update
```

### 4. 環境変数（`.env`）作成
```env
DB_URL=jdbc:mysql://localhost:3306/konya_db?serverTimezone=UTC&useSSL=false
DB_USER=java_user
DB_PASSWORD=your_password
```
起動コマンド  
```bash
export $(grep -v '^#' .env | xargs) && ./gradlew bootRun
```

### 5. ドメイン層
* `Article` エンティティ  
  * `id` (AUTO_INCREMENT)  
  * `title` (String)  
  * `content` (String)

### 6. リポジトリ・サービス・コントローラ
* リポジトリ: `ArticleRepository` (JpaRepository)
* サービス: `ArticleService`
* コントローラ: `/api/articles` で CRUD

### 7. 動作確認（curl）
```bash
# 追加
curl -X POST http://localhost:8080/api/articles \
     -H "Content-Type: application/json" \
     -d '{"title":"テスト","content":"本文"}'

# 一覧
curl http://localhost:8080/api/articles
```
### アプリケーションを更新する際の、一般的な流れ

アプリケーションのコードを修正して、その変更をサーバーに反映させたい場合、以下の流れになります。

1.  **ローカルPCで作業**
    *   コードを修正する。
    *   `docker-compose build app` で新しいイメージをビルドする。
    *   `docker-compose push app` で、更新したイメージをDocker Hubにアップロードする。

2.  **VM（サーバー）で作業**
    *   SSHでVMにログインする。
    *   `docker-compose.yml` があるディレクトリに移動する。
    *   `docker-compose pull` を実行して、Docker Hubから更新された `app` イメージをダウンロードする。
    *   `docker-compose up -d` を実行する。
