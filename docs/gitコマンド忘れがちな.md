コミットを「なかったこと」にする方法は、  
① まだ **リモートに push していない** 場合と  
② すでに **push 済み** かどうかで対応が変わります。  
被害を広げないために、まず `git log --oneline -5` で状況を確認してから実行しましょう。

──────────────────────────────
① push 前（ローカルのみ）のコミットを取り消す
──────────────────────────────
1. 直前のコミット内容をステージに戻す  
```bash
git reset --soft HEAD~1
# ⇒ 直前のコミットが取り消され、変更は index に残る
#   そのまま修正 → git commit し直せる
```

2. 直前のコミットを完全に捨ててワークツリーにだけ残す  
```bash
git reset --mixed HEAD~1   # オプションなしでも同じ
# ⇒ commit と index を消し、変更はワークツリーに残る
```

3. 直前のコミットも変更も完全削除（元に戻せない）  
```bash
git reset --hard HEAD~1
```
※ 誤って消したら `git reflog` で救出できます。  
　`git reset --hard <reflogのハッシュ>` で復旧可能。

4. コミットメッセージだけ直したい場合
```bash
git commit --amend
```

──────────────────────────────
② push 済みのコミットを取り消す
──────────────────────────────
A. 履歴を **書き換えず** に “取り消しコミット” を追加（安全）
```bash
git revert <コミットID>    # 1 つ
git revert <古いID>..HEAD   # 複数
```
• main／develop など共有ブランチで推奨  
• 元のコミットは残るので履歴が分かりやすい

B. 履歴ごと消す（force push が必要）  
⚠️ 他メンバーと共有している場合はトラブルの元になるので要相談
```bash
# 例: 直近 2 コミットを消す
git reset --hard HEAD~2
git push -f origin develop
```
• `-f`（--force）は上書きなので、他人のコミットまで消さないよう注意  
• GitHub では “Force push されました” と履歴が残ります

──────────────────────────────
チェックリスト
──────────────────────────────
1. 共有ブランチ（main / develop）なら **revert** が無難  
2. 個人作業ブランチでまだ誰も pull していなければ  
　`reset --soft` や `--hard` → `push -f` でも可  
3. 消した直後に「あっ！」となったら  
　`git reflog` からハッシュを拾って元に戻せる  
4. `git add -p` や `git commit --amend` を活用すると  
　“うっかりコミット” が減る

──────────────────────────────
例：よくあるケース
──────────────────────────────
・間違えて秘密情報をコミットして push  
　→ 即 `git revert <ID>` (履歴に残るが漏洩は止める)  
　→ 新しい commit で `.gitignore` 更新

・WIP を push してしまったが自分しか触っていない  
　→ `git reset --soft HEAD~1` でコミットだけ外し、修正して re-commit  
　→ `git push -f origin feature/foo`

──────────────────────────────
まとめ
──────────────────────────────
• **push 前** は `git reset` で自由に書き換え  
• **push 後** は原則 `git revert`、どうしてもなら `push -f`  
これを覚えておけば、間違えたコミットも安全に取り消せます。